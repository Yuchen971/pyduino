char delimiter =',';


//---------------------below required by module heat_suction_sensor----------------------------------------------------#


const int sensorPin = 1; //the analog pin the TMP36's Vout (sense) pin is connected to
                        //the resolution is 10 mV / degree centigrade with a
                        //500 mV offset to allow for negative temperatures

int  heat_suction_sensor_heat_sw_1= 2;
int  temp_sampling_number =20;
int  temp_sampling_interval_ms=1000;
//int  temp_sampling_number =20;
//int  temp_sampling_interval_ms=100;

//---------------------above required by module heat_suction_sensor----------------------------------------------------#




void setup() {
  Serial.begin(9600); // open serial port, set the baud rate as 9600 bps
  pinMode(heat_suction_sensor_heat_sw_1, OUTPUT);




pinMode(heat_suction_sensor_heat_sw_1, OUTPUT);  // switch for heating sucktion sensor 1
//(heat_suction_sensor_heat_sw_2, OUTPUT);  // switch for heating sucktion sensor 2
//---------------------above required by module heat_suction_sensor----------------------------------------------------#

}


void loop() {
Serial.print("Soil1,");
heat_suction_sensor_tmp36(sensorPin,heat_suction_sensor_heat_sw_1,temp_sampling_number,temp_sampling_interval_ms); 
delay(2000);
Serial.println();
//delay_min(30);
}

void heat_suction_sensor_tmp36(int temp_sensor_pin,int heat_sw,int sampling_number, int sampling_interval_ms){

  Serial.print("SucHeat");
  Serial.print(delimiter);
  Serial.print(temp_sensor_pin);
  Serial.print(delimiter);
  Serial.print("Heating");
  Serial.print(delimiter);
//  int heat_sw;
//  byte heat_suction_sensor_addr[8];
  digitalWrite(heat_sw, HIGH);
  for (int i=0; i<=sampling_number; i++)
  {
      delay (sampling_interval_ms);
      int reading = analogRead(sensorPin); 
      Serial.print((reading*5.0/1024.0-0.5)*100.0);
      Serial.write(delimiter);
  }

  Serial.print("Dsping");
  Serial.print(delimiter);
  digitalWrite(heat_sw, LOW);
  for (int i=0; i<=sampling_number; i++)
  {
      delay (sampling_interval_ms);
      int reading = analogRead(sensorPin); 
      Serial.print((reading*5.0/1024.0-0.5)*100.0);
      Serial.write(delimiter);
  }
      //Serial.println();
}  // heat_suction_sensor



//2017-03-23 09:42 calibration of sensor version 3 (heating element next to tmp36 sensor) with lucheng, without ceramic
// notice the bare cable is +

// the below result is when the sensor is in the air
//Soil1,SucHeat,1,Heating,37.89,38.38,39.36,39.84,40.82,41.80,42.29,42.77,43.75,44.24,45.21,45.70,46.19,46.68,47.66,48.63,49.61,50.10,50.59,51.56,52.05,Dsping,36.91,36.91,36.91,36.43,36.43,35.94,35.94,35.94,35.94,35.45,35.45,35.45,34.96,34.96,34.47,34.47,34.47,34.47,33.98,33.98,33.98,
//Soil1,SucHeat,1,Heating,48.14,48.63,49.12,50.10,51.07,51.56,52.05,53.03,54.00,54.49,55.96,55.96,56.93,57.42,58.40,58.89,59.38,59.86,60.84,60.84,61.82,Dsping,44.73,44.73,44.24,44.24,43.75,43.26,42.77,42.77,42.77,42.29,41.80,41.80,41.31,41.31,40.82,40.82,39.84,39.84,39.84,39.84,39.36,
//Soil1,SucHeat,1,Heating,54.49,54.98,55.96,56.45,56.93,57.91,58.40,58.89,59.38,60.35,60.84,61.33,61.82,62.30,63.28,63.77,64.26,64.75,65.23,66.21,66.70,Dsping,49.12,49.12,48.63,48.63,48.14,48.14,47.66,47.66,47.17,47.17,46.68,46.68,46.19,46.19,46.19,45.70,45.70,45.21,45.21,45.21,45.21,
//Soil1,SucHeat,1,Heating,60.84,61.82,62.30,63.28,63.77,63.77,64.75,65.23,65.72,66.70,67.19,67.68,68.16,68.65,69.14,69.63,70.61,71.09,71.58,72.07,72.56,Dsping,54.00,54.00,53.52,53.03,52.54,52.05,51.56,51.07,50.59,50.10,49.12,48.63,48.14,47.17,46.68,46.19,45.70,45.21,44.24,43.75,43.26,
// the below result is when sensor is at dry sand
//Soil1,SucHeat,1,Heating,57.91,58.40,58.40,58.89,59.38,59.86,59.86,60.35,60.84,61.33,61.33,61.82,62.30,62.30,62.79,63.28,63.28,63.77,63.77,64.26,64.26,Dsping,47.17,46.68,46.19,46.19,45.21,45.21,44.24,43.75,43.75,42.77,42.77,42.29,41.80,41.31,40.82,40.82,40.33,39.84,39.84,39.36,38.87,
//Soil1,SucHeat,1,Heating,54.00,54.49,54.98,55.47,55.96,56.45,57.42,57.42,57.91,57.91,59.38,59.38,59.38,60.35,60.84,60.84,61.33,61.82,62.30,62.30,62.79,Dsping,45.70,45.70,45.21,44.73,44.24,43.75,43.75,43.26,42.77,42.29,41.80,41.31,40.82,40.82,40.33,40.33,39.84,39.84,39.36,38.87,38.38,
//Soil1,SucHeat,1,Heating,53.52,54.00,54.49,54.98,55.47,55.96,56.45,57.42,57.91,58.40,58.89,59.38,59.38,59.86,60.35,60.84,61.33,61.82,62.30,62.79,62.79,Dsping,45.70,45.70,45.21,44.73,44.24,43.75,43.75,42.77,42.77,42.77,41.80,41.80,41.31,40.82,40.82,40.33,39.84,39.36,39.36,38.87,38.38,
//Soil1,SucHeat,1,Heating,53.52,54.00,54.49,55.47,55.96,56.45,56.93,57.42,57.91,58.40,58.89,59.38,59.86,60.35,60.84,61.33,61.33,62.30,62.30,62.79,63.28,Dsping,46.19,45.70,45.70,44.73,44.73,44.24,43.75,43.26,43.26,42.77,42.29,42.29,41.31,41.31,40.82,40.82,40.33,40.33,39.36,39.36,38.87,
//Soil1,SucHeat,1,Heating,54.00,54.98,55.47,55.96,56.45,56.93,57.91,58.40,58.89,59.38,59.86,60.35,60.84,61.33,61.82,61.82,62.79,63.28,63.77,64.26,64.75,Dsping,47.17,47.17,46.68,46.19,46.19,45.70,45.21,45.21,44.73,44.24,43.75,43.75,43.26,43.26,42.29,41.80,41.80,41.31,40.82,40.82,40.33,
//Soil1,SucHeat,1,Heating,55.47,56.45,56.93,57.42,57.91,58.89,59.38,60.35,60.84,60.84,61.82,62.79,62.79,63.77,64.26,64.75,65.23,66.21,66.70,67.19,67.68,Dsping,49.61,49.61,49.12,48.63,48.14,48.14,47.66,47.66,47.17,46.19,45.21,44.24,43.26,42.29,41.80,40.33,39.36,38.87,37.89,37.40,36.43,
// the below result is saturated sand result
//Soil1,SucHeat,1,Heating,49.61,49.61,50.10,50.59,51.07,51.07,51.56,51.56,52.05,52.05,52.54,52.54,52.54,53.03,53.52,53.52,54.00,54.00,54.49,54.49,54.49,Dsping,38.38,37.89,37.40,36.91,36.43,35.45,34.96,34.96,33.98,33.50,33.01,32.52,32.03,31.54,31.54,31.05,30.57,30.08,29.59,29.59,29.10,
//Soil1,SucHeat,1,Heating,42.77,43.26,43.75,44.73,45.21,45.70,46.19,46.68,47.17,47.66,48.14,48.63,49.12,49.61,50.10,50.10,50.59,51.07,51.56,51.56,52.05,Dsping,36.43,35.94,35.45,34.96,34.96,34.47,33.50,33.01,32.52,32.52,32.03,31.54,31.05,30.57,30.57,30.08,29.59,29.59,29.10,28.61,28.61,
//Soil1,SucHeat,1,Heating,41.80,42.77,43.26,43.75,44.73,45.21,45.70,46.19,46.68,47.17,47.66,48.14,48.63,49.12,49.61,50.10,50.59,50.59,51.07,51.56,51.56,Dsping,36.43,35.94,35.45,35.45,34.47,33.98,33.50,33.50,32.52,32.03,32.03,31.05,31.05,30.57,30.08,30.08,30.08,29.10,29.10,28.61,28.61,
//Soil1,SucHeat,1,Heating,41.80,42.77,43.26,43.75,44.24,45.21,45.70,46.19,47.17,47.17,47.66,48.14,48.63,49.12,49.61,50.10,50.59,50.59,50.59,51.56,51.56,Dsping,36.43,35.94,35.45,34.96,34.47,33.98,33.98,33.01,32.52,32.03,32.03,31.54,31.05,31.05,30.08,30.08,29.59,29.10,29.59,29.10,28.61,



//2017-03-23 10:07 below is the result of suction sensor v3  with ceramics.  
// heating in the air 
//Soil1,SucHeat,1,Heating,31.05,31.05,31.05,31.05,31.05,44.73,44.73,44.73,45.21,45.70,46.19,46.68,47.17,47.66,48.14,48.63,49.12,49.61,50.10,50.59,51.07,Dsping,36.91,37.40,37.89,37.89,37.89,37.89,37.89,38.38,38.38,37.89,37.89,37.89,37.89,37.89,37.40,37.40,37.40,36.91,36.91,36.91,36.91,
//Soil1,SucHeat,1,Heating,50.59,50.59,51.07,51.07,51.56,51.56,52.05,52.54,53.03,53.52,54.00,54.49,54.98,55.47,55.96,56.45,56.93,57.42,57.91,58.40,58.40,Dsping,43.26,43.75,43.75,43.75,43.75,43.75,43.75,43.75,43.75,43.26,43.26,43.26,42.77,42.77,42.77,42.29,42.29,41.80,41.80,41.31,41.31,
//Soil1,SucHeat,1,Heating,55.96,55.96,55.96,55.96,56.45,56.45,56.93,57.42,57.42,57.91,58.40,58.89,58.89,59.38,59.86,60.35,60.84,61.33,61.82,61.82,62.30,Dsping,46.68,47.17,47.17,47.17,47.17,46.68,46.68,46.68,46.19,46.19,45.70,45.70,45.70,45.21,45.21,44.73,44.73,44.73,44.24,44.24,44.24,
//Soil1,SucHeat,1,Heating,58.40,58.40,58.40,58.89,58.89,59.38,59.38,59.86,59.86,60.35,60.84,61.33,61.33,61.82,62.30,62.79,63.28,63.28,63.77,64.26,64.75,Dsping,48.63,48.63,48.63,48.63,48.63,48.63,48.63,48.14,48.14,47.66,47.66,47.17,47.17,46.68,46.68,46.68,46.19,46.19,45.70,45.70,45.21,
//Soil1,SucHeat,1,Heating,59.86,60.35,60.35,60.35,60.84,60.84,60.84,61.33,61.82,61.82,62.30,62.79,63.28,63.28,63.77,64.26,64.75,64.75,65.23,65.72,66.21,Dsping,50.10,50.10,50.10,50.10,50.10,50.10,49.61,49.61,49.12,49.12,48.63,48.63,48.14,48.14,48.14,47.66,47.66,47.17,47.17,46.68,46.68,
//Soil1,SucHeat,1,Heating,61.33,61.33,61.33,61.33,61.82,61.82,62.30,62.30,62.79,63.28,63.28,63.77,64.26,64.75,64.75,65.23,65.72,66.21,66.21,66.70,67.19,Dsping,50.59,51.07,51.07,51.07,51.07,50.59,50.59,50.10,50.10,49.61,49.61,49.12,49.12,48.63,48.63,48.14,48.14,47.66,47.66,47.17,47.17,
//Soil1,SucHeat,1,Heating,61.82,61.82,62.30,62.30,62.30,62.30,62.79,62.79,63.28,63.28,63.77,64.26,64.75,64.75,65.23,65.72,66.21,66.21,66.70,67.19,67.19,Dsping,50.59,50.59,51.07,50.59,50.59,50.10,49.61,49.61,49.12,48.63,48.14,48.14,47.66,47.17,46.68,46.68,46.19,45.70,45.21,45.21,44.73,


// heating in the dry soils  
//Soil1,SucHeat,1,Heating,40.33,40.82,40.82,41.31,41.80,42.29,42.77,43.26,43.75,44.24,45.21,45.70,46.19,46.68,47.17,47.66,48.14,48.63,49.12,50.10,50.59,Dsping,35.94,35.94,36.43,36.43,36.43,36.43,36.43,36.43,35.94,35.94,35.94,35.45,35.45,35.45,34.96,34.96,34.96,34.47,34.47,34.47,33.98,
//Soil1,SucHeat,1,Heating,47.66,47.66,48.14,48.14,48.63,48.63,49.12,49.61,49.61,50.10,50.59,51.07,51.56,52.05,52.54,53.03,53.03,53.52,54.00,54.49,54.98,Dsping,39.84,39.84,39.84,40.33,39.84,39.84,39.84,39.84,39.36,39.36,38.87,38.87,38.38,38.38,38.38,37.89,37.89,37.40,37.40,36.91,36.91,
//Soil1,SucHeat,1,Heating,51.07,50.59,51.07,51.07,51.07,51.56,51.56,52.05,52.54,53.03,53.03,53.52,54.00,54.49,54.49,54.98,55.47,55.96,56.45,56.45,56.93,Dsping,41.31,41.80,41.80,41.80,41.80,41.80,41.80,41.31,41.31,40.82,40.82,40.33,40.33,39.84,39.84,39.36,39.36,39.36,38.87,38.38,38.38,
//Soil1,SucHeat,1,Heating,52.54,52.54,52.54,52.54,53.03,53.03,53.52,53.52,54.00,54.49,54.49,54.98,55.47,55.96,56.45,56.45,56.93,57.42,57.91,58.40,58.40,Dsping,42.77,43.26,43.26,43.26,43.26,42.77,42.77,42.29,42.29,41.80,41.80,41.31,41.31,40.82,40.82,40.82,40.33,40.33,39.84,39.84,39.36,
//Soil1,SucHeat,1,Heating,53.52,53.52,53.52,54.00,54.00,54.00,54.49,54.98,54.98,55.47,55.96,56.45,56.45,56.93,57.42,57.42,57.91,58.40,58.89,58.89,59.38,Dsping,43.75,43.75,43.75,43.75,43.75,43.75,43.75,43.26,43.26,42.77,42.77,42.29,42.29,41.80,41.80,41.31,41.31,40.82,40.82,40.33,40.33,
//Soil1,SucHeat,1,Heating,54.49,54.49,54.49,54.49,54.98,54.98,55.47,55.47,55.96,56.45,56.45,56.93,57.42,57.42,57.91,58.40,58.89,59.38,59.38,59.86,60.35,Dsping,44.24,44.73,44.73,44.73,44.24,44.24,44.24,43.75,43.75,43.75,43.26,42.77,42.77,42.77,42.29,42.29,41.80,41.80,41.31,41.31,40.82,

// heating in water saturated sands
//Soil1,SucHeat,1,Heating,38.87,38.87,39.36,39.84,39.84,40.33,40.82,41.31,41.80,42.29,42.77,43.75,44.24,44.73,45.21,45.70,46.19,46.68,46.68,47.66,47.66,Dsping,33.50,33.98,33.98,33.98,33.98,33.98,33.98,33.98,33.50,33.50,33.50,33.01,33.01,32.52,32.52,32.03,32.03,31.54,31.54,31.05,30.57,
//Soil1,SucHeat,1,Heating,43.75,44.24,44.24,44.24,44.24,44.73,44.73,45.21,45.70,46.19,46.68,46.68,47.66,47.66,48.14,48.63,49.12,49.12,49.61,50.10,50.59,Dsping,35.45,35.94,35.94,35.94,35.94,35.94,35.45,35.45,34.96,34.96,34.47,34.47,33.98,33.98,33.50,33.50,33.01,32.52,32.52,32.52,32.03,
//Soil1,SucHeat,1,Heating,45.21,45.21,45.21,45.21,45.21,45.70,45.70,46.19,46.68,47.17,47.17,47.66,48.14,48.14,48.63,49.12,49.61,49.61,50.10,50.59,51.07,Dsping,35.94,36.43,36.43,36.43,36.43,36.43,35.94,35.94,35.45,35.45,34.96,34.96,34.47,33.98,33.98,33.50,33.50,33.01,32.52,32.52,32.03,
//Soil1,SucHeat,1,Heating,45.21,45.21,45.21,45.70,45.70,45.70,46.19,46.68,46.68,47.17,47.17,47.66,48.14,48.63,49.12,49.12,49.61,50.10,50.59,51.07,51.07,Dsping,36.43,36.43,36.43,36.43,36.43,36.43,36.43,35.94,35.45,35.45,34.96,34.96,34.47,34.47,33.98,33.98,33.50,33.01,33.01,32.52,32.03,
//Soil1,SucHeat,1,Heating,46.19,45.70,46.19,46.19,46.19,46.68,46.68,47.17,47.17,47.66,47.66,48.14,48.63,49.12,49.61,49.61,50.10,50.59,51.07,51.07,51.56,Dsping,36.43,36.43,36.43,36.91,36.43,36.43,35.94,35.94,35.94,35.45,34.96,34.96,34.96,-50.00,47.66,53.52,67.19,74.02,75.98,79.88,81.84,


